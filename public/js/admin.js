!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}({8:function(e,t,n){e.exports=n(9)},9:function(e,t){function n(e){return 0!=window.$(e).length}function a(e,t,n){for(var a=0;a<e.length;a++)n.removeClass(e[a]);n.addClass(t)}function i(e){window.$(e).each(function(e,t){""!==$(t).html()&&$(t).html(persianJs($(t).html()).englishNumber().toString())})}function o(e){return isNaN(e)?"00":u[(e-e%16)/16]+u[e%16]}function d(e){switch(e){case"saturday":return"شنبه";case"sunday":return"یکشنبه";case"monday":return"دوشنبه";case"tuesday":return"سه شنبه";case"wednesday":return"چهارشنبه"}}function s(e,t,n,a){for(var i=1,o=0;o<a[e].length;o++)(t>=a[e][o].st&&t<=a[e][o].et||n>=a[e][o].st&&n<=a[e][o].et)&&i++;return i}function r(e,t){var n=e.find(".msg.card");n.find(".star-bt").hover(function(){$(this).toggleClass("yellow")},function(){$(this).toggleClass("yellow")}),n.find(".archive-bt").hover(function(){$(this).toggleClass("brown")},function(){$(this).toggleClass("brown")}),n.find(".later-bt").hover(function(){$(this).toggleClass("orange")},function(){$(this).toggleClass("orange")}),n.find(".trash-bt").hover(function(){$(this).toggleClass("black")},function(){$(this).toggleClass("black")}),n.find(".left.floated .icon").on("click",function(){var e=$(this).attr("data-id"),n=$(this).attr("data-state"),a=$(this).attr("data-color"),i=void 0;i=$(this).hasClass(a)?n:"inbox";var o=$(this).find("input").serializeArray();window.$.ajax({url:t+"/"+e+"/"+i,type:"PATCH",data:o,success:function(){window.$("#messages_menu .item.active").trigger("click")},error:function(){}})}),n.find(".trash.icon").on("click",function(){var e=$(this).attr("data-id");window.$(".small.modal .content").html(window.$("#message_"+e).clone());var n=window.$(".small.modal :input").serializeArray();window.$(".small.modal").modal({onApprove:function(){window.$.ajax({url:t+"/"+e,type:"DELETE",data:n,success:function(){window.$("#messages_menu .item.active").trigger("click")}})}}).modal("show")})}function l(e){e.find("[id^=session_]").each(function(e,t){var n=$(t).attr("data-number"),a=$(t).find("[name=start_date_p_"+n+"]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#evaluation_sessions.modal tbody #session_"+n+" [name=start_date_"+n+"]",toolbox:{enabled:!1}});""!==$(t).find("[name=start_date_"+n+"]").val()&&a.setDate(parseInt($(t).find("[name=start_date_"+n+"]").val()));var i=$(t).find("[name=end_date_p_"+n+"]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#evaluation_sessions.modal tbody #session_"+n+" [name=end_date_"+n+"]",toolbox:{enabled:!1}});""!==$(t).find("[name=end_date_"+n+"]").val()&&i.setDate(parseInt($(t).find("[name=end_date_"+n+"]").val()))})}function c(e,t,n){e.css("top",n.find("div:last")[0].offsetTop),t.css("top",n.find("div:last")[0].offsetTop),e.css("left",n.find("div:last")[0].offsetLeft),t.css("left",n.find("div:last")[0].offsetLeft)}function m(e,t,n,a,i,o,d){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];c(t,n,a),t.on("click",function(){var i=(parseInt(a.find("div:last").attr("data-number"))+1).toString();e.find("[name=number_of_columns]").val(i),a.append('\n            <div class="column" data-number="'+i+'">\n                <input type="text" name="column_id_'+i+"\" placeholder=\"'id' of column "+i+'"  style="direction: ltr" required>\n                <input type="text" name="column_name_'+i+"\" placeholder=\"'نام فارسی' ستون "+i+'" required>\n            </div>\n            '),c(t,n,a),0!=s.length&&s.modal("refresh")}),n.on("click",function(){a.find("div").length>1&&(e.find("[name=number_of_columns]").val((parseInt(a.find("div:last").attr("data-number"))-1).toString()),a.find("div:last").remove()),c(t,n,a),0!=s.length&&s.modal("refresh")}),i.on("click",function(){var t=1;d.find(".fields").length>0&&(t=(parseInt(d.find(".fields:last").attr("data-number"))+1).toString()),e.find("[name=number_of_parameters]").val(t),d.append('\n            <div class="fields" data-number="'+t+'">\n                <div class="two wide field">\n                    <label class="fw-400">\'id\' پارامتر '+t+'</label>\n                    <input type="text" name="p_id_'+t+'" placeholder="\'p\' in ${p}" style="direction: ltr" required>\n                </div>\n                <div class="three wide field">\n                    <label class="fw-400">نام فارسی پارامتر '+t+'</label>\n                    <input type="text" name="p_name_'+t+'" placeholder="نام فارسی پارامتر '+t+'" required>\n                </div>\n                <div class="two wide field">\n                    <label class="fw-400">نوع پارامتر '+t+'</label>\n                    <select class="ui fluid dropdown" name="p_type_'+t+'" required>\n                        <option value="textbox">Textbox</option>\n                        <option value="dropdown">Dropdown</option>\n                    </select>\n                </div>\n                <div id="p_query" class="seven wide field disabled">\n                    <label class="fw-400">پرس و جوی پارامتر '+t+'</label>\n                    <input type="text" name="p_query_'+t+'" placeholder="SELECT statement for dropdown parameter" style="direction: ltr">\n                </div>\n                <div id="p_query_column" class="two wide field disabled">\n                    <label class="fw-400">\'id\' پرس و جو</label>\n                    <input type="text" name="p_query_column_'+t+'" placeholder="column id" style="direction: ltr">\n                </div>\n            </div>\n            '),d.find(".ui.dropdown").dropdown({onChange:function(e,t,n){"textbox"===e?(n.parents(".field").siblings("#p_query,#p_query_column").removeClass("disabled").addClass("disabled"),n.parents(".field").siblings("#p_query,#p_query_column").find("input").removeAttr("required")):"dropdown"===e&&(n.parents(".field").siblings("#p_query,#p_query_column").removeClass("disabled"),n.parents(".field").siblings("#p_query,#p_query_column").find("input").attr("required","required"))}}),0!=s.length&&s.modal("refresh")}),o.on("click",function(){0!==d.find(".fields").length&&e.find("[name=number_of_parameters]").val((parseInt(d.find(".fields:last").attr("data-number"))-1).toString()),d.find(".fields:last").remove(),0!=s.length&&s.modal("refresh")})}Chart.defaults.global.maintainAspectRatio=!1,Chart.defaults.global.defaultFontFamily="'IRANSans', 'Tahoma', 'Arial', sans-serif",String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)};var u=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");window.$(function(){!function(){if(window.$("#month_year").html((new persianDate).format("MMMM YYYY")),window.$.ajaxSetup({headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content}}),function(){var e=window.$(".mobile.menu #sidebar_btn"),t=window.$(".mobile.vertical.menu");e.on("click",function(){t.transition("fade down")}),function(e,t){var n=window.$(t),a=window.$(e+","+t);window.$(document).mouseup(function(e){n.hasClass("hidden")||a.is(e.target)||0!==a.has(e.target).length||n.transition("fade down")})}(".mobile.menu #sidebar_btn",".mobile.vertical.menu"),window.$(".basic.logout.icon.button").on("click",function(){window.$("#logout_form").submit()})}(),n("#p_admin_home")){if(window.$(".computer.menu .basic.icon.button:eq(0)").addClass("blue"),window.$(".vertical.menu a i:eq(0)").removeClass("grey").addClass("blue"),i(".p_number"),window.$(".ui.indicating.progress").progress({label:"ratio",text:{ratio:"{value}/{total}"}}),n("#feedback_chart canvas")){var e={type:"pie",data:feedback_data,options:{tooltips:{enabled:!1},responsive:!0,legend:{display:!1},animation:{animateScale:!0,animateRotate:!0}}},t=window.$("#feedback_chart canvas")[0].getContext("2d");new Chart(t,e)}if(n("#students_chart canvas")){var a={type:"pie",data:students_data,options:{responsive:!0,legend:{position:"bottom",labels:{boxWidth:14,fontSize:14}},tooltips:{displayColors:!1,bodyFontSize:14}}},c=window.$("#students_chart canvas")[0].getContext("2d");new Chart(c,a)}window.$(".unix.date").each(function(e,t){var n=new persianDate(parseInt($(t).html()));$(t).html(n.format("D MMMM"))})}if(n("#p_admin_courses")){window.$(".computer.menu .basic.icon.button:eq(1)").addClass("green"),window.$(".vertical.menu a i:eq(1)").removeClass("grey").addClass("green");var u=window.$(".grey.segment table tr .orange.button"),p=window.$("#edit_course.modal"),f=p.find("form"),_=f.attr("action");u.on("click",function(){var e=$(this).data("id"),t=window.$("#course_"+e);window.$("#edit_course .ui.form").form("reset"),window.$("#edit_course .ui.form .error.message").html(""),f.find("[name=course_name]").val(t.find("td:nth-child(1)").html()),f.find("[name=course_code]").val(t.find("td:nth-child(2)").html()),f.find("[name=units]").val(t.find("td:nth-child(3)").html()),f.find("[name=default_min_capacity_fall]").val(t.find("td:nth-child(4)").html()),f.find("[name=default_min_capacity_spring]").val(t.find("td:nth-child(5)").html()),f.find("[name=category]").val(t.find("td:nth-child(6)").html()),f.find("[name=planned_semester]").val(t.find("td:nth-child(7)").html()),window.$(".ui.dropdown").dropdown(),f.attr("action",_+"/"+e),p.modal({onApprove:function(){return window.$("#edit_course .ui.form").form("is valid")}}).modal("show")}),!0===window.$("#edit_course.modal").data("error")&&p.modal("show");var h=window.$(".grey.segment table tr .red.button"),w=window.$("#delete_course.modal"),g=w.find("table tbody tr"),v=w.find("form"),b=v.attr("action");h.on("click",function(){var e=$(this).data("id"),t=window.$("#course_"+e);g.find("td:nth-child(1)").html(t.find("td:nth-child(1)").html()),g.find("td:nth-child(2)").html(t.find("td:nth-child(2)").html()),g.find("td:nth-child(3)").html(t.find("td:nth-child(3)").html()),v.attr("action",b+"/"+e),w.modal("show")}),window.$("#p_admin_courses .ui.form").form({fields:{course_name:{identifier:"course_name",rules:[{type:"empty",prompt:"لطفا نام درس را وارد کنید"}]},course_code:{identifier:"course_code",rules:[{type:"empty",prompt:"کد درس را وارد کنید"},{type:"integer",prompt:"کد درس باید به شکل عددی باشد"}]},units:{identifier:"units",rules:[{type:"empty",prompt:"تعداد واحد های درس را وارد کنید"},{type:"integer",prompt:"تعداد واحد های درس باید به شکل عددی باشد"},{type:"exactLength[1]",prompt:"تعداد واحد های درس باید 1 کاراکتر باشد"}]},default_min_capacity_fall:{identifier:"default_min_capacity_fall",rules:[{type:"empty",prompt:"حداقل ظرفیت پاییز را وارد کنید"},{type:"integer",prompt:"حداقل ظرفیت پاییز باید به شکل عددی باشد"},{type:"maxLength[2]",prompt:"حداقل ظرفیت پاییز باید حداکثر 2 کاراکتر باشد"}]},default_min_capacity_spring:{identifier:"default_min_capacity_spring",rules:[{type:"empty",prompt:"حداقل ظرفیت بهار را وارد کنید"},{type:"integer",prompt:"حداقل ظرفیت بهار باید به شکل عددی باشد"},{type:"maxLength[2]",prompt:"حداقل ظرفیت بهار باید حداکثر 2 کاراکتر باشد"}]},category:{identifier:"category",rules:[{type:"empty",prompt:"لطفا دسته بندی درس مورد نظر را انتخاب کنید"}]}}}),window.$("#edit_course .ui.form").form({fields:{course_name:{identifier:"course_name",rules:[{type:"empty",prompt:"لطفا نام درس را وارد کنید"}]},course_code:{identifier:"course_code",rules:[{type:"empty",prompt:"کد درس را وارد کنید"},{type:"integer",prompt:"کد درس باید به شکل عددی باشد"}]},units:{identifier:"units",rules:[{type:"empty",prompt:"تعداد واحد های درس را وارد کنید"},{type:"integer",prompt:"تعداد واحد های درس باید به شکل عددی باشد"},{type:"exactLength[1]",prompt:"تعداد واحد های درس باید 1 کاراکتر باشد"}]},default_min_capacity_fall:{identifier:"default_min_capacity_fall",rules:[{type:"empty",prompt:"حداقل ظرفیت پاییز را وارد کنید"},{type:"integer",prompt:"حداقل ظرفیت پاییز باید به شکل عددی باشد"},{type:"maxLength[2]",prompt:"حداقل ظرفیت پاییز باید حداکثر 2 کاراکتر باشد"}]},default_min_capacity_spring:{identifier:"default_min_capacity_spring",rules:[{type:"empty",prompt:"حداقل ظرفیت بهار را وارد کنید"},{type:"integer",prompt:"حداقل ظرفیت بهار باید به شکل عددی باشد"},{type:"maxLength[2]",prompt:"حداقل ظرفیت بهار باید حداکثر 2 کاراکتر باشد"}]},category:{identifier:"category",rules:[{type:"empty",prompt:"لطفا دسته بندی درس مورد نظر را انتخاب کنید"}]}}}),window.$(".ui.dropdown").dropdown(),n(".grey.segment .message")&&(window.$(".grey.segment .message .close").on("click",function(){$(this).closest(".message").transition("fade")}),setTimeout(function(){window.$(".grey.segment .message").hasClass("hidden")||window.$(".grey.segment .message").transition("fade")},4e3))}if(n("#p_admin_instructors")){window.$(".computer.menu .basic.icon.button:eq(2)").addClass("violet"),window.$(".vertical.menu a i:eq(2)").removeClass("grey").addClass("violet");var y=window.$(".grey.segment table tr .orange.button"),k=window.$("#edit_instructor.modal"),C=k.find("form"),x=C.attr("action");y.on("click",function(){var e=$(this).data("id"),t=window.$("#instructor_"+e);window.$("#edit_instructor .ui.form").form("reset"),window.$("#edit_instructor .ui.form .error.message").html(""),C.find("[name=instructor_name]").val(t.find("td:nth-child(1)").html()),C.find("[name=sex]").val(t.find("td:nth-child(2)").html()),""!==t.find("td:nth-child(3) a").html()&&C.find("[name=profile_link]").val(t.find("td:nth-child(3) a").html()),window.$(".ui.dropdown").dropdown(),C.attr("action",x+"/"+e),k.modal({onApprove:function(){return window.$("#edit_instructor .ui.form").form("is valid")}}).modal("show")}),!0===window.$("#edit_instructor.modal").data("error")&&k.modal("show");var q=window.$(".grey.segment table tr .red.button"),D=window.$("#delete_instructor.modal"),Y=D.find("table tbody tr"),S=D.find("form"),T=S.attr("action");q.on("click",function(){var e=$(this).data("id"),t=window.$("#instructor_"+e);Y.find("td:nth-child(1)").html(t.find("td:nth-child(1)").html()),Y.find("td:nth-child(2)").html(t.find("td:nth-child(2)").html()),Y.find("td:nth-child(3)").html(t.find("td:nth-child(3)").html()),Y.find("td:nth-child(4)").html(t.find("td:nth-child(4)").html()),S.attr("action",T+"/"+e),D.modal("show")}),window.$("#p_admin_instructors .ui.form").form({fields:{instructor_name:{identifier:"instructor_name",rules:[{type:"empty",prompt:"لطفا نام استاد را وارد کنید."}]},sex:{identifier:"sex",rules:[{type:"empty",prompt:"لطفا جنسیت استاد را انتخاب کنید."}]},profile_link:{identifier:"profile_link",rules:[]},photo:{identifier:"photo",rules:[]}}}),window.$("#edit_instructor .ui.form").form({fields:{instructor_name:{identifier:"instructor_name",rules:[{type:"empty",prompt:"لطفا نام استاد را وارد کنید."}]},sex:{identifier:"sex",rules:[{type:"empty",prompt:"لطفا جنسیت استاد را انتخاب کنید."}]},profile_link:{identifier:"profile_link",rules:[]},photo:{identifier:"photo",rules:[]}}}),window.$(".ui.dropdown").dropdown(),n(".grey.segment .message")&&(window.$(".grey.segment .message .close").on("click",function(){$(this).closest(".message").transition("fade")}),setTimeout(function(){window.$(".grey.segment .message").hasClass("hidden")||window.$(".grey.segment .message").transition("fade")},4e3))}if(n("#p_admin_semesters")){window.$(".computer.menu .basic.icon.button:eq(3)").addClass("brown"),window.$(".vertical.menu a i:eq(3)").removeClass("grey").addClass("brown");var I=window.$(".grey.segment table tr .orange.button"),M=window.$("#edit_semester.modal"),z=M.find("form"),A=z.attr("action");I.on("click",function(){var e=$(this).data("id"),t=window.$("#semester_"+e);window.$("#edit_semester .ui.form").form("reset"),window.$("#edit_semester .ui.form .error.message").html(""),z.find("[name=semester]").val(t.find("td:nth-child(1)").html()),z.find("[name=year]").val(t.find("td:nth-child(2)").html()),window.$(".ui.dropdown").dropdown(),z.attr("action",A+"/"+e),M.modal({onApprove:function(){return window.$("#edit_semester .ui.form").form("is valid")}}).modal("show")}),!0===window.$("#edit_semester.modal").data("error")&&M.modal("show");var j=window.$(".grey.segment table tr .red.button"),F=window.$("#delete_semester.modal"),H=F.find("table tbody tr"),E=F.find("form"),L=E.attr("action");j.on("click",function(){var e=$(this).data("id"),t=window.$("#semester_"+e);H.find("td:nth-child(1)").html(t.find("td:nth-child(1)").html()),H.find("td:nth-child(2)").html(t.find("td:nth-child(2)").html()),E.attr("action",L+"/"+e),F.modal("show")}),window.$("#p_admin_semesters .ui.form").form({fields:{semester:{identifier:"semester",rules:[{type:"empty",prompt:"لطفا نوبت ترم را انتخاب کنید."}]},year:{identifier:"year",rules:[{type:"empty",prompt:"لطفا سال ترم را وارد کنید."},{type:"number",prompt:"سال ترم باید به شکل عددی باشد."},{type:"exactLength[4]",prompt:"سال ترم باید 4 رقم داشته باشد."}]}}}),window.$("#edit_semester .ui.form").form({fields:{semester:{identifier:"semester",rules:[{type:"empty",prompt:"لطفا نوبت ترم را انتخاب کنید."}]},year:{identifier:"year",rules:[{type:"empty",prompt:"لطفا سال ترم را وارد کنید."},{type:"number",prompt:"سال ترم باید به شکل عددی باشد."},{type:"exactLength[4]",prompt:"سال ترم باید 4 رقم داشته باشد."}]}}}),window.$(".ui.dropdown").dropdown(),n(".grey.segment .message")&&(window.$(".grey.segment .message .close").on("click",function(){$(this).closest(".message").transition("fade")}),setTimeout(function(){window.$(".grey.segment .message").hasClass("hidden")||window.$(".grey.segment .message").transition("fade")},4e3))}if(n("#p_admin_semester_courses")&&(window.$(".computer.menu .basic.icon.button:eq(3)").addClass("brown"),window.$(".vertical.menu a i:eq(3)").removeClass("grey").addClass("brown"),window.$(".ui.checkbox").checkbox({onChecked:function(){$(this).parents("tr").find(".ui.input").removeClass("disabled")},onUnchecked:function(){$(this).parents("tr").find(".ui.input").addClass("disabled")}}),window.$("#select_all").on("click",function(){window.$(".ui.checkbox").checkbox("check")}),window.$("#deselect_all").on("click",function(){window.$(".ui.checkbox").checkbox("uncheck")}),window.$("#submit_changes").on("click",function(){for(var e=window.$("tbody tr"),t=[],n=0;n<e.length;n++){var a=e[n].id;t.push({id:a,checked:window.$("#"+a+" .ui.checkbox").checkbox("is checked"),min_capacity:window.$("#"+a+" .ui.input input").val()})}window.$.ajax({url:document.location.href+"/updatecourses",type:"POST",data:JSON.stringify(t),contentType:"application/json",success:function(e,t,n){window.location=window.$(".ui.breadcrumb a").attr("href")},error:function(e,t,n){}})})),n("#p_admin_students")){window.$(".computer.menu .basic.icon.button:eq(4)").addClass("teal"),window.$(".vertical.menu a i:eq(4)").removeClass("grey").addClass("teal");var V=window.$(".grey.segment table tr .red.button"),O=window.$("#delete_student.modal"),G=O.find("table tbody tr"),N=O.find("form"),P=N.attr("action");V.on("click",function(){var e=$(this).data("id"),t=window.$("#student_"+e);G.find("td:nth-child(1)").html(t.find("td:nth-child(1)").html()),G.find("td:nth-child(2)").html(t.find("td:nth-child(2)").html()),G.find("td:nth-child(3)").html(t.find("td:nth-child(3)").html()),G.find("td:nth-child(4)").html(t.find("td:nth-child(4)").html()),G.find("td:nth-child(5)").html(t.find("td:nth-child(5)").html()),N.attr("action",P+"/"+e),O.modal("show")}),n(".grey.segment .message")&&(window.$(".grey.segment .message .close").on("click",function(){$(this).closest(".message").transition("fade")}),setTimeout(function(){window.$(".grey.segment .message").hasClass("hidden")||window.$(".grey.segment .message").transition("fade")},4e3))}if(n("#p_admin_student_courses")&&(window.$(".computer.menu .basic.icon.button:eq(4)").addClass("teal"),window.$(".vertical.menu a i:eq(4)").removeClass("grey").addClass("teal"),window.$(".menu .item").tab()),n("#p_admin_reports")){window.$(".computer.menu .basic.icon.button:eq(5)").addClass("red"),window.$(".vertical.menu a i:eq(5)").removeClass("grey").addClass("red");var W=window.$(".blue.segment .basic.query.label .green.icon.button"),R=window.$("#query_view"),J=window.$("#query_result.modal");W.on("click",function(){var e=$(this).attr("data-id"),t=$(this).parent().siblings(".dimmer");t.dimmer("toggle"),window.$.ajax({url:document.location.origin+"/admin/query/"+e,type:"get",success:function(e,n,a){R.html(e),R.find(".ui.dropdown").dropdown(),R.find("form").on("submit",function(){var e=$(this).attr("action"),t=$(this).serializeArray(),n=$(this).find(".dimmer");return n.dimmer("toggle"),window.$.ajax({url:e,type:"post",data:t,success:function(e,t,a){J.find(".scrolling.content").html(e),J.modal("show"),n.dimmer("toggle")},error:function(e,t,a){n.dimmer("toggle")}}),!1}),t.dimmer("toggle")},error:function(e,n,a){t.dimmer("toggle")}})});var K=window.$(".blue.segment .basic.query.label .red.icon.button"),U=window.$("#delete_query.modal");K.on("click",function(){var e=$(this).attr("data-id"),t=$(this).parent().siblings("span").find("span").html();U.find(".content span span").html(t);var n=document.location.origin+"/admin/query/"+e;U.find("form").attr("action",n),U.modal("show")}),U.modal({onApprove:function(){U.find("form").submit()}});var X=window.$(".blue.segment .basic.query.label .orange.icon.button"),B=window.$("#edit_query.modal");X.on("click",function(){var e=$(this).attr("data-id"),t=$(this).parent().siblings(".dimmer");t.dimmer("toggle"),window.$.ajax({url:document.location.origin+"/admin/query/"+e+"/edit",type:"get",success:function(n,a,i){B.find(".content").html(n);var o=B.find("form"),d=B.find("#add_column"),s=B.find("#remove_column"),r=B.find("#query_columns"),l=B.find("#add_parameter"),c=B.find("#remove_parameter"),u=B.find("#parameters");u.find(".ui.dropdown").dropdown({onChange:function(e,t,n){"textbox"===e?(n.parents(".field").siblings("#p_query,#p_query_column").removeClass("disabled").addClass("disabled"),n.parents(".field").siblings("#p_query,#p_query_column").find("input").removeAttr("required")):"dropdown"===e&&(n.parents(".field").siblings("#p_query,#p_query_column").removeClass("disabled"),n.parents(".field").siblings("#p_query,#p_query_column").find("input").attr("required","required"))}});var p=document.location.origin+"/admin/query/"+e;o.attr("action",p),B.modal({onApprove:function(){var e=!1;if(o.find("input,select").each(function(t,n){$(n)[0].checkValidity()||(e=!1)}),!e)return o.find("input[type=submit]").click(),!1;o.submit()}}),B.modal("show"),m(o,d,s,r,l,c,u,B),t.dimmer("toggle")},error:function(e,n,a){t.dimmer("toggle")}})}),n(".message.session")&&(window.$(".message.session .close").on("click",function(){$(this).closest(".message").transition("fade")}),setTimeout(function(){window.$(".message.session").hasClass("hidden")||window.$(".message.session").transition("fade")},4e3))}if(n("#p_admin_query_builder")){window.$(".computer.menu .basic.icon.button:eq(5)").addClass("red"),window.$(".vertical.menu a i:eq(5)").removeClass("grey").addClass("red"),m(window.$("#create_query"),window.$("#create_query #add_column"),window.$("#create_query #remove_column"),window.$("#create_query #query_columns"),window.$("#create_query #add_parameter"),window.$("#create_query #remove_parameter"),window.$("#create_query #parameters"));var Q=window.$("#create_query #view_database"),Z=window.$("#database_map.modal");Q.on("click",function(){Z.modal("show")}),n(".message.session")&&(window.$(".message.session .close").on("click",function(){$(this).closest(".message").transition("fade")}),setTimeout(function(){window.$(".message.session").hasClass("hidden")||window.$(".message.session").transition("fade")},4e3))}if(n("#p_admin_scheduling")){window.$(".computer.menu .basic.icon.button:eq(6)").addClass("orange"),window.$(".vertical.menu a i:eq(6)").removeClass("grey").addClass("orange");var ee=window.$("#add_schedule.modal"),te=ee.find(".actions .orange.right.labeled.icon.button"),ne=window.$("#add_schedule.modal .actions .blue.labeled.icon.button"),ae=window.$("#add_schedule.modal .scrolling.content #course_groups"),ie=ae.find(".top.attached.menu .left.menu"),oe=ee.find(".actions .positive.right.labeled.icon.button"),de=window.$("#p_admin_scheduling").attr("data-stage");if(-1!==window.$.inArray(de,["1st","2nd"])){var se=window.$("#courses.modal");window.$("#add_to_schedule_btn.large.labeled.icon.button").on("click",function(){se.modal("show")});var re=window.$(".ui.course.card");re.on("click",function(){var e=$(this).attr("data-id"),t=$(this).find(".ui.inverted.dimmer");if(ee.find("#course_info .top.attached.tabular.menu a").removeClass("active"),ee.find("#course_info .top.attached.tabular.menu a:first").addClass("active"),ee.find("#course_info .bottom.attached.tab.segment").removeClass("active"),ee.find("#course_info .bottom.attached.tab.segment:first").addClass("active"),ne.show(),"notscheduled"===$(this).attr("data-state")){oe.find("span").html("ثبت در برنامه"),oe.find("i").removeClass("write").addClass("checkmark"),te.hide(),ie.find("a.new").remove(),ie.find("a:first-child").removeClass("active").addClass("active"),ae.find(".top.attached.menu .right.menu .red.labeled.icon.button").addClass("disabled"),ae.find(".bottom.attached.tab.segment.new").remove(),ae.find(".bottom.attached.tab.segment").removeClass("active").addClass("active"),window.$("#add_schedule.modal .scrolling.content form").form("clear"),i("#add_schedule.modal .scrolling.content .menu .item"),window.$("#add_schedule.modal .scrolling.content .menu .item").tab(),window.$("#add_schedule.modal .scrolling.content .ui.dropdown").dropdown(),ae.find(".bottom.attached.tab.segment form input[name=course_id]").val(e),ae.find(".bottom.attached.tab.segment form input[name=group_number]").val(1);var n=window.$("#add_schedule.modal .scrolling.content .tab.segment .block.preview"),a=randomColor();n.css("background-color",a),n.siblings("input").val(a),n.on("click",function(){a=randomColor(),$(this).css("background-color",a),$(this).siblings("input").val(a)}),n.html($(this).find(".content .header").html()),window.$("#add_schedule.modal .scrolling.content input.timepicker").timepicker({timeFormat:"HH:mm:ss",interval:15,minTime:"08:00",maxTime:"20:00",dynamic:!1,dropdown:!0,scrollbar:!0}),window.$("#add_schedule.modal .scrolling.content input[name=exam_date]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#add_schedule.modal .scrolling.content form:eq(0) input[name=exam_date_unix]",toolbox:{enabled:!1}}),t.dimmer("toggle"),window.$.ajax({url:document.location.origin+"/admin/scheduling/"+e+"/information",type:"GET",success:function(e,n,a){for(var i=e.instructors_info,o="",d=0;d<i.length;d++)null===i[d].photo&&("مرد"===i[d].sex?i[d].photo="instructor_photos/img_male.png":i[d].photo="instructor_photos/img_female.png"),o+='\n                            <div class="row">\n                                <div class="photo" data-tooltip="'+i[d].name+'" data-position="right center">\n                                    <img class="ui mini circular image" src="/storage/'+i[d].photo+'">\n                                </div>\n                                <div class="progress">\n                                    <div class="ui indicating progress" data-value="'+i[d].votes+'" data-total="'+i[0].votes+'">\n                                        <div class="bar"></div>\n                                    </div>\n                                </div>\n                                <div class="votes">\n                                    '+i[d].votes+"\n                                </div>\n                            </div>\n                        ";""!==o?(window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors").html(o),window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors .progress").progress()):window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors").html("برای این درس استادی پیشنهاد نشده است.");for(var s=e.course_conflicts,r="",l=0;l<s.length;l++)r+="<tr><td>"+(l+1)+"</td><td>"+s[l].code+"</td><td>"+s[l].name+"</td><td>"+s[l].count+"</td></tr>";""!==r?window.$("#add_schedule.modal .scrolling.content table.conflicts tbody").html(r):window.$("#add_schedule.modal .scrolling.content table.conflicts tbody").html('<tr><td colspan="4">برای این درس تداخلی وجود ندارد.</td></tr>');for(var c=e.course_students,m="",u=0;u<c.length;u++)m+="<tr><td>"+(u+1)+"</td><td>"+c[u].first_name+"</td><td>"+c[u].last_name+"</td><td>"+c[u].student_id+"</td><td>"+c[u].entry_year+"</td></tr>";""!==m?window.$("#add_schedule.modal .scrolling.content table.students tbody").html(m):window.$("#add_schedule.modal .scrolling.content table.students tbody").html('<tr><td colspan="5">دانشجویی این درس را اخذ نکرده است.</td></tr>'),t.dimmer("toggle"),ee.modal("show")},error:function(e,t,n){}})}else t.dimmer("toggle"),window.$.ajax({url:document.location.origin+"/admin/scheduling/"+e+"/information",type:"GET",success:function(e,n,a){ie.find("a.new").remove();var o=ie.find("a:first-child");o.removeClass("active").addClass("active"),ae.find(".top.attached.menu .right.menu .red.labeled.icon.button").addClass("disabled"),ae.find(".bottom.attached.tab.segment.new").remove();var s=ae.find(".bottom.attached.tab.segment");s.removeClass("active").addClass("active");for(var r=e.schedule_info,l=0;l<r.length;l++)if(0==l){s.find("form").form("clear"),s.find("form input[name=course_id]").val(r[l].course_id),s.find("form input[name=group_number]").val(r[l].group_number),s.find("form select[name=instructor_id]").val(r[l].instructor_id),s.find("form input[name=course_color]").val(r[l].course_color),s.find("form select[name=weekday_1]").val(r[l].weekday_1),s.find("form input[name=classroom_1]").val(r[l].classroom_1),s.find("form input[name=start_time_1]").val(r[l].start_time_1),s.find("form input[name=end_time_1]").val(r[l].end_time_1),s.find("form select[name=weekday_2]").val(r[l].weekday_2),s.find("form input[name=classroom_2]").val(r[l].classroom_2),s.find("form input[name=start_time_2]").val(r[l].start_time_2),s.find("form input[name=end_time_2]").val(r[l].end_time_2),s.find("form input[name=exam_time]").val(r[l].exam_time);var c=s.find(".block.preview");c.html(r[l].course_name),c.css("background-color",r[l].course_color),c.on("click",function(){random_color=randomColor(),$(this).css("background-color",random_color),$(this).siblings("input").val(random_color)});var m=s.find("form input[name=exam_date]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#add_schedule.modal .scrolling.content form:eq("+(parseInt(r[l].group_number)-1).toString()+") input[name=exam_date_unix]",toolbox:{enabled:!1}});null!==r[l].exam_date_unix&&m.setDate(parseInt(r[l].exam_date_unix))}else{var u=o.clone().removeClass("active").addClass("new");u.attr("data-tab",(l+1).toString()),u.html("گروه "+(l+1).toString()),ie.append(u),ae.find(".top.attached.menu .right.menu .red.labeled.icon.button").removeClass("disabled");var p=s.clone().removeClass("active").addClass("new");p.attr("data-tab",(l+1).toString()),p.find("form").form("clear"),p.find("form input[name=course_id]").val(r[l].course_id),p.find("form input[name=group_number]").val(r[l].group_number),p.find("form select[name=instructor_id]").val(r[l].instructor_id),p.find("form input[name=course_color]").val(r[l].course_color),p.find("form select[name=weekday_1]").val(r[l].weekday_1),p.find("form input[name=classroom_1]").val(r[l].classroom_1),p.find("form input[name=start_time_1]").val(r[l].start_time_1),p.find("form input[name=end_time_1]").val(r[l].end_time_1),p.find("form select[name=weekday_2]").val(r[l].weekday_2),p.find("form input[name=classroom_2]").val(r[l].classroom_2),p.find("form input[name=start_time_2]").val(r[l].start_time_2),p.find("form input[name=end_time_2]").val(r[l].end_time_2),p.find("form input[name=exam_time]").val(r[l].exam_time);var f=p.find(".block.preview");f.html(r[l].course_name),f.css("background-color",r[l].course_color),f.on("click",function(){random_color=randomColor(),$(this).css("background-color",random_color),$(this).siblings("input").val(random_color)});var _=p.find("form input[name=exam_date]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#add_schedule.modal .scrolling.content form:eq("+(parseInt(r[l].group_number)-1).toString()+") input[name=exam_date_unix]",toolbox:{enabled:!1}});null!==r[l].exam_date_unix&&_.setDate(parseInt(r[l].exam_date_unix)),ae.append(p)}window.$("#add_schedule.modal .scrolling.content .menu .item").tab(),window.$("#add_schedule.modal .scrolling.content .ui.dropdown").dropdown(),window.$("#add_schedule.modal .scrolling.content input.timepicker").timepicker({timeFormat:"HH:mm:ss",interval:15,minTime:"08:00",maxTime:"20:00",dynamic:!1,dropdown:!0,scrollbar:!0}),i("#add_schedule.modal .scrolling.content .menu .item");for(var h=e.instructors_info,w="",g=0;g<h.length;g++)null===h[g].photo&&("مرد"===h[g].sex?h[g].photo="instructor_photos/img_male.png":h[g].photo="instructor_photos/img_female.png"),w+='\n                            <div class="row">\n                                <div class="photo" data-tooltip="'+h[g].name+'" data-position="right center">\n                                    <img class="ui mini circular image" src="/storage/'+h[g].photo+'">\n                                </div>\n                                <div class="progress">\n                                    <div class="ui indicating progress" data-value="'+h[g].votes+'" data-total="'+h[0].votes+'">\n                                        <div class="bar"></div>\n                                    </div>\n                                </div>\n                                <div class="votes">\n                                    '+h[g].votes+"\n                                </div>\n                            </div>\n                        ";""!==w?(window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors").html(w),window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors .progress").progress()):window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors").html("برای این درس استادی پیشنهاد نشده است.");for(var v=e.course_conflicts,b="",y=0;y<v.length;y++)b+="<tr><td>"+(y+1)+"</td><td>"+v[y].code+"</td><td>"+v[y].name+"</td><td>"+v[y].count+"</td></tr>";""!==b?window.$("#add_schedule.modal .scrolling.content table.conflicts tbody").html(b):window.$("#add_schedule.modal .scrolling.content table.conflicts tbody").html('<tr><td colspan="4">برای این درس تداخلی وجود ندارد.</td></tr>');for(var k=e.course_students,C="",x=0;x<k.length;x++)C+="<tr><td>"+(x+1)+"</td><td>"+k[x].first_name+"</td><td>"+k[x].last_name+"</td><td>"+k[x].student_id+"</td><td>"+k[x].entry_year+"</td></tr>";if(""!==C?window.$("#add_schedule.modal .scrolling.content table.students tbody").html(C):window.$("#add_schedule.modal .scrolling.content table.students tbody").html('<tr><td colspan="5">دانشجویی این درس را اخذ نکرده است.</td></tr>'),"2nd"===de){var q=e.course_evaluation;if(q.length>0){ee.find("#course_info .top.attached.tabular.menu").append('\n                                    <a class="item fw-400" data-tab="evaluations">درخواست های دانشجویان</a>\n                                ');var D="";D+='<div class="ui bottom attached tab segment" data-tab="evaluations"><div class="ui text container">';for(var Y=0;Y<q.length;Y++)if(D+='\n                                    <div class="ui fluid inverted card">\n                                        <div class="ui inverted dimmer">\n                                            <div class="ui loader"></div>\n                                        </div>\n                                        <div class="content">\n                                            <div class="ui divided selection list">\n                                    ',null!==q[Y].suggested_weekday_1&&(D+='\n                                        <a class="item">\n                                            <div class="ui blue large horizontal label fw-400" style="padding: 1rem">تغییر جلسه اول</div>\n                                            <span style="font-size: 1.2rem">\n                                                <span>از </span>\n                                                <span>'+d(q[Y].weekday_1)+'</span>\n                                                <span class="p_number">'+q[Y].start_time_1.substr(0,5)+'</span><span> تا </span><span class="p_number">'+q[Y].end_time_1.substr(0,5)+"</span>\n                                                <span> به </span>\n                                                <span>"+d(q[Y].suggested_weekday_1)+'</span>\n                                                <span class="p_number">'+q[Y].suggested_start_time_1.substr(0,5)+'</span><span> تا </span><span class="p_number">'+q[Y].suggested_end_time_1.substr(0,5)+'</span>\n                                            </span>\n                                            <div style="margin-top: .5rem">\n                                                <div class="ui green fluid basic label">\n                                                    <div class="ui green horizontal label fw-400" style="padding: .5rem">دلیل</div>\n                                                    <span style="line-height: 2rem">'+q[Y].suggestion_reason_1+"</span>\n                                                </div>\n                                            </div>\n                                        </a>\n                                        "),null!==q[Y].suggested_weekday_2&&(D+='\n                                        <a class="item">\n                                            <div class="ui blue large horizontal label fw-400" style="padding: 1rem">تغییر جلسه اول</div>\n                                            <span style="font-size: 1.2rem">\n                                                <span>از </span>\n                                                <span>'+d(q[Y].weekday_2)+'</span>\n                                                <span class="p_number">'+q[Y].start_time_2.substr(0,5)+'</span><span> تا </span><span class="p_number">'+q[Y].end_time_2.substr(0,5)+"</span>\n                                                <span> به </span>\n                                                <span>"+d(q[Y].suggested_weekday_2)+'</span>\n                                                <span class="p_number">'+q[Y].suggested_start_time_2.substr(0,5)+'</span><span> تا </span><span class="p_number">'+q[Y].suggested_end_time_2.substr(0,5)+'</span>\n                                            </span>\n                                            <div style="margin-top: .5rem">\n                                                <div class="ui green fluid basic label">\n                                                    <div class="ui green horizontal label fw-400" style="padding: .5rem">دلیل</div>\n                                                    <span style="line-height: 2rem">'+q[Y].suggestion_reason_2+"</span>\n                                                </div>\n                                            </div>\n                                        </a>\n                                        "),null!==q[Y].suggested_exam_date&&(D+='\n                                        <a class="item">\n                                            <div class="ui red large horizontal label fw-400" style="padding: 1rem">تغییر امتحان</div>\n                                            <span style="font-size: 1.2rem">\n                                                <span>از </span>\n                                                <span>'+q[Y].exam_date+'</span>\n                                                <span> ساعت </span><span class="p_number">'+q[Y].exam_time.substr(0,5)+"</span>\n                                                <span> به </span>\n                                                <span>"+q[Y].suggested_exam_date+'</span>\n                                                <span> ساعت </span><span class="p_number">'+q[Y].suggested_exam_time.substr(0,5)+'</span>\n                                            </span>\n                                            <div style="margin-top: .5rem">\n                                                <div class="ui green fluid basic label">\n                                                    <div class="ui green horizontal label fw-400" style="padding: .5rem">دلیل</div>\n                                                    <span style="line-height: 2rem">'+q[Y].exam_suggestion_reason+"</span>\n                                                </div>\n                                            </div>\n                                        </a>\n                                        "),D+="</div></div>","public"===q[Y].privacy){var S="",T="";q[Y].upvotes>0&&(S=" blue-color"),q[Y].downvotes<0&&(T=" red-color"),D+='\n                                            <div class="extra content">\n                                                <div class="left floated'+S+'" style="direction: ltr">\n                                                    <i class="thumbs outline up big icon"></i>\n                                                    <span>'+q[Y].upvotes+'</span>\n                                                </div>\n                                                <div class="right floated'+T+'" style="direction: ltr">\n                                                    <i class="thumbs outline down big icon"></i>\n                                                    <span>'+q[Y].downvotes+"</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        "}else D+='\n                                            <div class="extra content" style="text-align: center">\n                                                <span>درخواست شخصی</span>\n                                            </div>\n                                        </div>\n                                        ';D+="</div></div>",ee.find("#course_info").append(D),ee.find("#course_info .menu .item").tab(),i(".p_number")}}oe.find("span").html("ویرایش برنامه"),oe.find("i").removeClass("checkmark").addClass("write"),te.show(),t.dimmer("toggle"),ee.modal("show")},error:function(e,t,n){}})}),re.hover(function(){"scheduled"===$(this).attr("data-state")?$(this).find(".right.corner.label i").transition("flash"):$(this).find(".right.corner.label i").addClass("checkmark")},function(){"notscheduled"===$(this).attr("data-state")&&$(this).find(".right.corner.label i").removeClass("checkmark")}),ae.find(".top.attached.menu .right.menu .green.labeled.icon.button").on("click",function(){var e=ie.find("a:last-child").clone().removeClass("active").addClass("new"),t=parseInt(e.attr("data-tab"));e.html("گروه "+(t+1).toString()),e.attr("data-tab",(t+1).toString()),ie.append(e),ae.find(".top.attached.menu .right.menu .red.labeled.icon.button").removeClass("disabled");var n=ae.find(".bottom.attached.tab.segment:last-child").clone().removeClass("active").addClass("new");n.attr("data-tab",(t+1).toString());var a=n.find("form input[name=course_id]").val();n.find("form").form("clear"),n.find("form input[name=course_id]").val(a),n.find("form input[name=group_number]").val((t+1).toString()),ae.append(n),ie.find("a").removeClass("active"),ie.find("a:last-child").addClass("active"),ae.find(".bottom.attached.tab.segment").removeClass("active"),ae.find(".bottom.attached.tab.segment:last-child").addClass("active"),window.$("#add_schedule.modal .scrolling.content .menu .item").tab(),n.find(".ui.dropdown").dropdown();var d=n.find(".block.preview");d.siblings("input").val(function(e){return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+o(e[1])+o(e[2])+o(e[3])}(d.css("background-color"))),d.on("click",function(){var e=randomColor();$(this).css("background-color",e),$(this).siblings("input").val(e)}),i("#add_schedule.modal .scrolling.content .menu .item"),window.$("#add_schedule.modal .scrolling.content input.timepicker").timepicker({timeFormat:"HH:mm:ss",interval:15,minTime:"08:00",maxTime:"20:00",dynamic:!1,dropdown:!0,scrollbar:!0}),window.$("#add_schedule.modal .scrolling.content input[name=exam_date]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#add_schedule.modal .scrolling.content form:eq("+t.toString()+") input[name=exam_date_unix]",toolbox:{enabled:!1}})}),ae.find(".top.attached.menu .right.menu .red.labeled.icon.button").on("click",function(){ie.find("a.new:last").remove(),n(ie.find("a.new:last"))?ie.find("a.new:last").addClass("active"):(ie.find("a:first").addClass("active"),ae.find(".top.attached.menu .right.menu .red.labeled.icon.button").addClass("disabled")),ae.find(".bottom.attached.tab.segment.new:last").remove(),n(ae.find(".bottom.attached.tab.segment.new:last"))?ae.find(".bottom.attached.tab.segment.new:last").addClass("active"):ae.find(".bottom.attached.tab.segment:first").addClass("active")}),ne.on("click",function(){ee.find("#course_info .top.attached.tabular.menu a[data-tab=evaluations]").remove(),ee.find("#course_info .bottom.attached.tab.segment[data-tab=evaluations]").remove(),se.modal("show")}),ee.modal({onApprove:function(){var e=[],t=!0;if(ae.find("form").each(function(n,a){$(a).form({fields:{instructor_id:"empty",weekday_1:"empty",start_time_1:"empty",end_time_1:"empty"}}),$(a).form("is valid")?($(a).removeClass("error"),$(a).find(".field").removeClass("error")):($(a).submit(),t=!1);for(var i=$(a).serializeArray(),o={},d=0;d<i.length;d++)o[[i[d].name]]=i[d].value;e[n]=o}),!t)return!1;window.$.ajax({url:document.location.origin+"/admin/scheduling/store",type:"POST",data:JSON.stringify(e),contentType:"application/json",success:function(e,t,n){document.location=document.location.origin+"/admin/scheduling"},error:function(e,t,n){document.location=document.location.origin+"/admin/scheduling"}})}}),te.on("click",function(){var e=ae.find("form:first input[name=course_id]").val();window.$.ajax({url:document.location.origin+"/admin/scheduling/"+e+"/destroy",type:"POST",success:function(e,t,n){document.location=document.location.origin+"/admin/scheduling/"},error:function(e,t,n){document.location=document.location.origin+"/admin/scheduling"}})});var le=window.$("#evaluation_sessions.modal");le.find("#add_session").on("click",function(){var e=le.find("[id^=session_]:last").attr("data-number");e=(parseInt(e)+1).toString(),le.find("table tbody").append('\n                <tr id="session_'+e+'" data-number="'+e+'">\n                    <td class="collapsing">\n                        <div class="ui toggle checkbox" style="display: block;">\n                            <input name="session_enable" type="radio" value="'+e+'">\n                            <label style="padding-right: 3.5rem;"></label>\n                        </div>\n                    </td>\n                    <td>مرحله <span class="p_number">'+e+'</span>\n                        <input type="hidden" name="session_number_'+e+'" value="'+e+'">\n                    </td>\n                    <td>\n                        <div class="fluid field">\n                            <input type="text" name="start_date_p_'+e+'" placeholder="تاریخ شروع" style="text-align: center">\n                            <input type="hidden" name="start_date_'+e+'">\n                        </div>\n                    </td>\n                    <td>\n                        <div class="fluid field">\n                            <input type="text" name="end_date_p_'+e+'" placeholder="تاریخ پایان" style="text-align: center">\n                            <input type="hidden" name="end_date_'+e+'">\n                        </div>\n                    </td>\n                </tr>\n                '),le.find("table tbody input[name=number_of_sessions]").val(e),le.find("#remove_session").removeClass("disabled"),l(le)}),l(le),le.find("#remove_session").on("click",function(){var e=le.find("[id^=session_]");if(e.length>1){2===e.length&&$(this).addClass("disabled"),le.find("table tbody input[name=number_of_sessions]").val(e.length-1);var t=le.find("[id^=session_]:last");t.find("input[name=session_enable]").is(":checked")&&le.find("[id^=session_]:eq("+(e.length-2).toString()+") .ui.toggle.checkbox").checkbox("check"),t.remove()}}),window.$("#evaluation_sessions_btn.labeled.button").on("click",function(){le.modal("show")}),le.modal({onApprove:function(){for(var e=parseInt(le.find("form input[name=number_of_sessions]").val()),t={},n=0;n<e;n++)t["start_date_p_"+(n+1)]="empty",t["start_date_"+(n+1)]="empty",t["end_date_p_"+(n+1)]="empty",t["end_date_"+(n+1)]="empty";if(le.find("form").form({fields:t}),!le.find("form").form("is valid"))return le.find("form").submit(),!1;le.find("form").submit()},onDeny:function(){document.location=document.location.origin+"/admin/scheduling"}})}var ce={top_offset:window.$("#schedule_table table")[0].offsetTop,header_h:window.$("#schedule_table table thead tr")[0].offsetHeight,tblock_h:window.$("#schedule_table table tbody tr")[0].offsetHeight/2,timecol_w:window.$("#schedule_table table tbody tr td:first-child")[0].offsetWidth,weekday_w:window.$("#schedule_table table thead tr th:last-child")[0].offsetWidth};!function(e,t,n,a,o,r,l,c,m){var u={saturday:[],sunday:[],monday:[],tuesday:[],wednesday:[]};e.html("");for(var p=0;p<schedule_data.length;p++)!function(e,t,n,a,i,o,d,r){var l=window.$("<div>",{class:"title"});l.html(t.course_name);var c="";""!==t.group_number&&(c+="گروه: "+t.group_number),""!==t.instructor_name&&(c+=" | استاد درس: "+t.instructor_name),""!==t.classroom&&(c+=" | کلاس: "+t.classroom),""!==t.exam_date&&(c+=" | تاریخ امتحان: "+t.exam_date),""!==t.exam_time&&(c+=" | ساعت امتحان: "+t.exam_time);var m=window.$("<div>",{class:"course lecture","data-schedule-id":t.schedule_id,"data-course-id":t.course_id,"data-weekday":n,"data-tooltip":c,"data-position":"bottom center"});m.html(l),m.prepend('\n    <div class="ui inverted dimmer">\n        <div class="ui loader"></div>\n    </div>\n    '),m.css("background-color",o);var u=a.split(":"),p=i.split(":"),f=60*(parseInt(p[0])-parseInt(u[0]))+(parseInt(p[1])-parseInt(u[1]));m.css("width",d.tblock_h*(f/15)),e.append(m);var _=60*parseInt(u[0])+parseInt(u[1])+1,h=60*parseInt(p[0])+parseInt(p[1]),w=1;switch(n){case"saturday":w=s(n,_,h,r),m.css("right",16+w*m[0].offsetHeight+d.timecol_w);break;case"sunday":w=s(n,_,h,r),m.css("right",16+w*m[0].offsetHeight+d.timecol_w+d.weekday_w);break;case"monday":w=s(n,_,h,r),m.css("right",16+w*m[0].offsetHeight+d.timecol_w+2*d.weekday_w);break;case"tuesday":w=s(n,_,h,r),m.css("right",16+w*m[0].offsetHeight+d.timecol_w+3*d.weekday_w);break;case"wednesday":w=s(n,_,h,r),m.css("right",16+w*m[0].offsetHeight+d.timecol_w+4*d.weekday_w)}r[n].push({id:t.course_id,st:_,et:h});var g=(60*(parseInt(u[0])-8)+parseInt(u[1]))/15*d.tblock_h;m.css("top",d.top_offset+d.header_h+d.tblock_h+g)}(e,schedule_data[p].lecture_info,schedule_data[p].weekday,schedule_data[p].start_time,schedule_data[p].end_time,schedule_data[p].course_color,c,u);-1!==window.$.inArray(m,["1st","2nd"])&&e.find(".course.lecture").each(function(e,s){!function(e,t,n,a,o,s,r,l){e.on("click",function(){var e=$(this).find(".ui.inverted.dimmer");e.dimmer("toggle"),course_id=$(this).attr("data-course-id"),s.find("#course_info .top.attached.tabular.menu a[data-tab=evaluations]").remove(),s.find("#course_info .bottom.attached.tab.segment[data-tab=evaluations]").remove(),s.find("#course_info .top.attached.tabular.menu a").removeClass("active"),s.find("#course_info .top.attached.tabular.menu a:first").addClass("active"),s.find("#course_info .bottom.attached.tab.segment").removeClass("active"),s.find("#course_info .bottom.attached.tab.segment:first").addClass("active"),window.$.ajax({url:document.location.origin+"/admin/scheduling/"+course_id+"/information",type:"GET",success:function(c,m,u){t.find("a.new").remove();var p=t.find("a:first-child");p.removeClass("active").addClass("active"),n.find(".top.attached.menu .right.menu .red.labeled.icon.button").addClass("disabled"),n.find(".bottom.attached.tab.segment.new").remove();var f=n.find(".bottom.attached.tab.segment");f.removeClass("active").addClass("active");for(var _=c.schedule_info,h=0;h<_.length;h++)if(0==h){f.find("form").form("clear"),f.find("form input[name=course_id]").val(_[h].course_id),f.find("form input[name=group_number]").val(_[h].group_number),f.find("form select[name=instructor_id]").val(_[h].instructor_id),f.find("form input[name=course_color]").val(_[h].course_color),f.find("form select[name=weekday_1]").val(_[h].weekday_1),f.find("form input[name=classroom_1]").val(_[h].classroom_1),f.find("form input[name=start_time_1]").val(_[h].start_time_1),f.find("form input[name=end_time_1]").val(_[h].end_time_1),f.find("form select[name=weekday_2]").val(_[h].weekday_2),f.find("form input[name=classroom_2]").val(_[h].classroom_2),f.find("form input[name=start_time_2]").val(_[h].start_time_2),f.find("form input[name=end_time_2]").val(_[h].end_time_2),f.find("form input[name=exam_time]").val(_[h].exam_time);var w=f.find(".block.preview");w.html(_[h].course_name),w.css("background-color",_[h].course_color),w.on("click",function(){random_color=randomColor(),$(this).css("background-color",random_color),$(this).siblings("input").val(random_color)});var g=f.find("form input[name=exam_date]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#add_schedule.modal .scrolling.content form:eq("+(parseInt(_[h].group_number)-1).toString()+") input[name=exam_date_unix]",toolbox:{enabled:!1}});null!==_[h].exam_date_unix&&g.setDate(parseInt(_[h].exam_date_unix))}else{var v=p.clone().removeClass("active").addClass("new");v.attr("data-tab",(h+1).toString()),v.html("گروه "+(h+1).toString()),t.append(v),n.find(".top.attached.menu .right.menu .red.labeled.icon.button").removeClass("disabled");var b=f.clone().removeClass("active").addClass("new");b.attr("data-tab",(h+1).toString()),b.find("form").form("clear"),b.find("form input[name=course_id]").val(_[h].course_id),b.find("form input[name=group_number]").val(_[h].group_number),b.find("form select[name=instructor_id]").val(_[h].instructor_id),b.find("form input[name=course_color]").val(_[h].course_color),b.find("form select[name=weekday_1]").val(_[h].weekday_1),b.find("form input[name=classroom_1]").val(_[h].classroom_1),b.find("form input[name=start_time_1]").val(_[h].start_time_1),b.find("form input[name=end_time_1]").val(_[h].end_time_1),b.find("form select[name=weekday_2]").val(_[h].weekday_2),b.find("form input[name=classroom_2]").val(_[h].classroom_2),b.find("form input[name=start_time_2]").val(_[h].start_time_2),b.find("form input[name=end_time_2]").val(_[h].end_time_2),b.find("form input[name=exam_time]").val(_[h].exam_time);var y=b.find(".block.preview");y.html(_[h].course_name),y.css("background-color",_[h].course_color),y.on("click",function(){random_color=randomColor(),$(this).css("background-color",random_color),$(this).siblings("input").val(random_color)});var k=b.find("form input[name=exam_date]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#add_schedule.modal .scrolling.content form:eq("+(parseInt(_[h].group_number)-1).toString()+") input[name=exam_date_unix]",toolbox:{enabled:!1}});null!==_[h].exam_date_unix&&k.setDate(parseInt(_[h].exam_date_unix)),n.append(b)}window.$("#add_schedule.modal .scrolling.content .menu .item").tab(),window.$("#add_schedule.modal .scrolling.content .ui.dropdown").dropdown(),window.$("#add_schedule.modal .scrolling.content input.timepicker").timepicker({timeFormat:"HH:mm:ss",interval:15,minTime:"08:00",maxTime:"20:00",dynamic:!1,dropdown:!0,scrollbar:!0}),i("#add_schedule.modal .scrolling.content .menu .item");for(var C=c.instructors_info,x="",q=0;q<C.length;q++)null===C[q].photo&&("مرد"===C[q].sex?C[q].photo="instructor_photos/img_male.png":C[q].photo="instructor_photos/img_female.png"),x+='\n                            <div class="row">\n                                <div class="photo" data-tooltip="'+C[q].name+'" data-position="right center">\n                                    <img class="ui mini circular image" src="/storage/'+C[q].photo+'">\n                                </div>\n                                <div class="progress">\n                                    <div class="ui indicating progress" data-value="'+C[q].votes+'" data-total="'+C[0].votes+'">\n                                        <div class="bar"></div>\n                                    </div>\n                                </div>\n                                <div class="votes">\n                                    '+C[q].votes+"\n                                </div>\n                            </div>\n                        ";""!==x?(window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors").html(x),window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors .progress").progress()):window.$("#add_schedule.modal .scrolling.content .bottom.attached.tab .instructors").html("برای این درس استادی پیشنهاد نشده است.");for(var D=c.course_conflicts,Y="",S=0;S<D.length;S++)Y+="<tr><td>"+(S+1)+"</td><td>"+D[S].code+"</td><td>"+D[S].name+"</td><td>"+D[S].count+"</td></tr>";""!==Y?window.$("#add_schedule.modal .scrolling.content table.conflicts tbody").html(Y):window.$("#add_schedule.modal .scrolling.content table.conflicts tbody").html('<tr><td colspan="4">برای این درس تداخلی وجود ندارد.</td></tr>');for(var T=c.course_students,I="",M=0;M<T.length;M++)I+="<tr><td>"+(M+1)+"</td><td>"+T[M].first_name+"</td><td>"+T[M].last_name+"</td><td>"+T[M].student_id+"</td><td>"+T[M].entry_year+"</td></tr>";if(""!==I?window.$("#add_schedule.modal .scrolling.content table.students tbody").html(I):window.$("#add_schedule.modal .scrolling.content table.students tbody").html('<tr><td colspan="5">دانشجویی این درس را اخذ نکرده است.</td></tr>'),"2nd"===l){var z=c.course_evaluation;if(z.length>0){s.find("#course_info .top.attached.tabular.menu").append('\n                                    <a class="item fw-400" data-tab="evaluations">درخواست های دانشجویان</a>\n                                ');var A="";A+='<div class="ui bottom attached tab segment" data-tab="evaluations"><div class="ui text container">';for(var j=0;j<z.length;j++)if(A+='\n                                    <div class="ui fluid inverted card">\n                                        <div class="ui inverted dimmer">\n                                            <div class="ui loader"></div>\n                                        </div>\n                                        <div class="content">\n                                            <div class="ui divided selection list">\n                                    ',null!==z[j].suggested_weekday_1&&(A+='\n                                        <a class="item">\n                                            <div class="ui blue large horizontal label fw-400" style="padding: 1rem">تغییر جلسه اول</div>\n                                            <span style="font-size: 1.2rem">\n                                                <span>از </span>\n                                                <span>'+d(z[j].weekday_1)+'</span>\n                                                <span class="p_number">'+z[j].start_time_1.substr(0,5)+'</span><span> تا </span><span class="p_number">'+z[j].end_time_1.substr(0,5)+"</span>\n                                                <span> به </span>\n                                                <span>"+d(z[j].suggested_weekday_1)+'</span>\n                                                <span class="p_number">'+z[j].suggested_start_time_1.substr(0,5)+'</span><span> تا </span><span class="p_number">'+z[j].suggested_end_time_1.substr(0,5)+'</span>\n                                            </span>\n                                            <div style="margin-top: .5rem">\n                                                <div class="ui green fluid basic label">\n                                                    <div class="ui green horizontal label fw-400" style="padding: .5rem">دلیل</div>\n                                                    <span style="line-height: 2rem">'+z[j].suggestion_reason_1+"</span>\n                                                </div>\n                                            </div>\n                                        </a>\n                                        "),null!==z[j].suggested_weekday_2&&(A+='\n                                        <a class="item">\n                                            <div class="ui blue large horizontal label fw-400" style="padding: 1rem">تغییر جلسه اول</div>\n                                            <span style="font-size: 1.2rem">\n                                                <span>از </span>\n                                                <span>'+d(z[j].weekday_2)+'</span>\n                                                <span class="p_number">'+z[j].start_time_2.substr(0,5)+'</span><span> تا </span><span class="p_number">'+z[j].end_time_2.substr(0,5)+"</span>\n                                                <span> به </span>\n                                                <span>"+d(z[j].suggested_weekday_2)+'</span>\n                                                <span class="p_number">'+z[j].suggested_start_time_2.substr(0,5)+'</span><span> تا </span><span class="p_number">'+z[j].suggested_end_time_2.substr(0,5)+'</span>\n                                            </span>\n                                            <div style="margin-top: .5rem">\n                                                <div class="ui green fluid basic label">\n                                                    <div class="ui green horizontal label fw-400" style="padding: .5rem">دلیل</div>\n                                                    <span style="line-height: 2rem">'+z[j].suggestion_reason_2+"</span>\n                                                </div>\n                                            </div>\n                                        </a>\n                                        "),null!==z[j].suggested_exam_date&&(A+='\n                                        <a class="item">\n                                            <div class="ui red large horizontal label fw-400" style="padding: 1rem">تغییر امتحان</div>\n                                            <span style="font-size: 1.2rem">\n                                                <span>از </span>\n                                                <span>'+z[j].exam_date+'</span>\n                                                <span> ساعت </span><span class="p_number">'+z[j].exam_time.substr(0,5)+"</span>\n                                                <span> به </span>\n                                                <span>"+z[j].suggested_exam_date+'</span>\n                                                <span> ساعت </span><span class="p_number">'+z[j].suggested_exam_time.substr(0,5)+'</span>\n                                            </span>\n                                            <div style="margin-top: .5rem">\n                                                <div class="ui green fluid basic label">\n                                                    <div class="ui green horizontal label fw-400" style="padding: .5rem">دلیل</div>\n                                                    <span style="line-height: 2rem">'+z[j].exam_suggestion_reason+"</span>\n                                                </div>\n                                            </div>\n                                        </a>\n                                        "),A+="</div></div>","public"===z[j].privacy){var F="",H="";z[j].upvotes>0&&(F=" blue-color"),z[j].downvotes<0&&(H=" red-color"),A+='\n                                            <div class="extra content">\n                                                <div class="left floated'+F+'" style="direction: ltr">\n                                                    <i class="thumbs outline up big icon"></i>\n                                                    <span>'+z[j].upvotes+'</span>\n                                                </div>\n                                                <div class="right floated'+H+'" style="direction: ltr">\n                                                    <i class="thumbs outline down big icon"></i>\n                                                    <span>'+z[j].downvotes+"</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        "}else A+='\n                                            <div class="extra content" style="text-align: center">\n                                                <span>درخواست شخصی</span>\n                                            </div>\n                                        </div>\n                                        ';A+="</div></div>",s.find("#course_info").append(A),s.find("#course_info .menu .item").tab(),i(".p_number")}}a.find("span").html("ویرایش برنامه"),a.find("i").removeClass("checkmark").addClass("write"),o.show(),r.hide(),e.dimmer("toggle"),s.modal("show")},error:function(t,n,a){e.dimmer("toggle")}})})}($(s),t,n,a,o,r,l,m)})}(window.$("#schedule_table .schedule"),ie,ae,oe,te,ee,ne,ce,de)}if(n("#p_admin_messages")){window.$(".computer.menu .basic.icon.button:eq(7)").addClass("olive"),window.$(".vertical.menu a i:eq(7)").removeClass("grey").addClass("olive");var me=document.location.origin+"/admin/messages",ue=window.$("#messages_menu .item"),pe=window.$("#messages_dimmer"),fe=window.$("#messages_list"),_e=window.$("#no_messages");r(fe,me),ue.on("click",function(){ue.removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-state");"inbox"===e?(pe.dimmer("toggle"),window.$.ajax({url:me+"/getinbox",type:"GET",success:function(e){""===e?_e.show():_e.hide(),fe.html(e),r(fe,me),pe.dimmer("toggle")},error:function(){pe.dimmer("toggle")}})):"star"===e?(pe.dimmer("toggle"),window.$.ajax({url:me+"/getstar",type:"GET",success:function(e){""===e?_e.show():_e.hide(),fe.html(e),r(fe,me),pe.dimmer("toggle")},error:function(){pe.dimmer("toggle")}})):"later"===e?(pe.dimmer("toggle"),window.$.ajax({url:me+"/getlater",type:"GET",success:function(e){""===e?_e.show():_e.hide(),fe.html(e),r(fe,me),pe.dimmer("toggle")},error:function(){pe.dimmer("toggle")}})):"archive"===e&&(pe.dimmer("toggle"),window.$.ajax({url:me+"/getarchive",type:"GET",success:function(e){""===e?_e.show():_e.hide(),fe.html(e),r(fe,me),pe.dimmer("toggle")},error:function(){pe.dimmer("toggle")}}))})}if(n("#p_admin_settings")){window.$(".computer.menu .basic.icon.button:eq(8)").addClass("black"),window.$(".vertical.menu a i:eq(8)").removeClass("grey").addClass("black"),window.$(".ui.dropdown").dropdown();var he=window.$("#delete_admin.modal"),we=window.$("#registered_admin_list tr .red.button"),ge=he.find("form");we.on("click",function(){var e=$(this).attr("data-id");he.find("table tbody td:eq(0)").html(window.$("#registered_admin_list #admin_"+e+" td:eq(0)").html()),he.find("table tbody td:eq(1)").html(window.$("#registered_admin_list #admin_"+e+" td:eq(1)").html()),ge.attr("action",ge.attr("action")+"/"+e+"/unregisteradmin"),he.modal("show")}),he.modal({onApprove:function(){ge.submit()}});for(var ve=["prereg_start_date","prereg_end_date","eval_start_date","eval_end_date","final_date"],be=window.$("#p_admin_settings form:eq(0)"),ye=0;ye<ve.length;ye++){var $e=be.find("input[name="+ve[ye]+"_p]").persianDatepicker({initialValue:!1,observer:!0,autoClose:!0,format:"YYYY/MM/DD",altField:"#p_admin_settings form input[name="+ve[ye]+"]",toolbox:{enabled:!1}});""!==be.find("input[name="+ve[ye]+"]").val()&&$e.setDate(parseInt(be.find("input[name="+ve[ye]+"]").val()))}n("#manage_admin_panel .message.session")&&(window.$("#manage_admin_panel .message.session .close").on("click",function(){$(this).closest(".message").transition("fade")}),setTimeout(function(){window.$("#manage_admin_panel .message.session").hasClass("hidden")||window.$("#manage_admin_panel .message.session").transition("fade")},4e3))}}(),window.$(window).resize(function(){!function(){n("#p_admin_scheduling")&&function(){var e=window.$(".ui.course.cards"),t=["one","two","three","four"];window.innerWidth>1199?a(t,"four",e):window.innerWidth>991?a(t,"three",e):window.innerWidth>559?a(t,"two",e):a(t,"one",e)}();var e=window.$(".mobile.vertical.menu");screen.width<768||e.hasClass("hidden")||(e.removeClass("visible"),e.addClass("hidden"))}()})})}});